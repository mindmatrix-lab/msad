diff -Npur ffmpeg-5.1.4/libavcodec/exr.c ffmpeg-5.1.4-change/libavcodec/exr.c
--- ffmpeg-5.1.4/libavcodec/exr.c	2023-11-10 07:38:54.000000000 +0800
+++ ffmpeg-5.1.4-change/libavcodec/exr.c	2025-11-05 16:23:05.801046771 +0800
@@ -2060,6 +2060,16 @@ static int decode_frame(AVCodecContext *
         for (int i = 0; i < 4; i++)
             s->channel_offsets[i] *= 2;
     }
+    if (s->compression == EXR_DWAA ||
+        s->compression == EXR_DWAB) {
+        for (int i = 0; i<s->nb_channels; i++) {
+            EXRChannel *channel = &s->channels[i];
+            if (channel->pixel_type != s->pixel_type) {
+                avpriv_request_sample(s->avctx, "mixed pixel type DWA");
+                return AVERROR_PATCHWELCOME;
+            }
+        }
+    }
 
     switch (s->pixel_type) {
     case EXR_FLOAT:

