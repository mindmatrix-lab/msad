diff -Npur sqlite-version-3.46.1/ext/fts5/fts5_index.c sqlite-version-3.46.1-change/ext/fts5/fts5_index.c
--- sqlite-version-3.46.1/ext/fts5/fts5_index.c	2024-08-13 17:16:08.000000000 +0800
+++ sqlite-version-3.46.1-change/ext/fts5/fts5_index.c	2025-09-28 14:48:28.972018400 +0800
@@ -1933,9 +1933,9 @@ static void fts5SegIterSetNext(Fts5Index
 ** leave an error in the Fts5Index object.
 */
 static void fts5SegIterAllocTombstone(Fts5Index *p, Fts5SegIter *pIter){
-  const int nTomb = pIter->pSeg->nPgTombstone;
+  const i64 nTomb = (i64)pIter->pSeg->nPgTombstone;
   if( nTomb>0 ){
-    int nByte = nTomb * sizeof(Fts5Data*) + sizeof(Fts5TombstoneArray);
+    i64 nByte = nTomb * sizeof(Fts5Data*) + sizeof(Fts5TombstoneArray);
     Fts5TombstoneArray *pNew;
     pNew = (Fts5TombstoneArray*)sqlite3Fts5MallocZero(&p->rc, nByte);
     if( pNew ){
